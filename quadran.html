<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Où pointe votre boussole Data ? - CK Labs</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      align-items: start;
    }

    /* Left column - Quadran */
    .quadran-section {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.08);
    }

    .quadran-header {
      margin-bottom: 30px;
    }

    .quadran-header h1 {
      color: #1d3759;
      font-size: 28px;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .quadran-header p {
      color: #666;
      font-size: 16px;
    }

    /* Quadran canvas */
    .quadran-wrapper {
      position: relative;
      width: 100%;
      max-width: 600px;
      aspect-ratio: 1;
      margin: 0 auto 30px;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: inset 0 2px 8px rgba(0,0,0,0.05);
    }

    #quadranCanvas {
      width: 100%;
      height: 100%;
      cursor: crosshair;
      display: block;
    }

    /* Controls */
    .controls {
      display: flex;
      gap: 15px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 28px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-reset {
      background: #f0f0f0;
      color: #666;
    }

    .btn-reset:hover {
      background: #e0e0e0;
    }

    .btn-validate {
      background: #1d3759;
      color: white;
      box-shadow: 0 4px 12px rgba(29,55,89,0.3);
    }

    .btn-validate:hover {
      background: #2d4a6f;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(29,55,89,0.4);
    }

    .coordinates {
      color: #666;
      font-size: 14px;
      font-weight: 600;
    }

    /* Right column - Info */
    .info-section {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.08);
    }

    .info-section h2 {
      color: #1d3759;
      font-size: 24px;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .info-section p {
      color: #666;
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .info-section strong {
      color: #1d3759;
    }

    .info-section ul {
      list-style: none;
      margin: 20px 0;
    }

    .info-section li {
      color: #666;
      font-size: 16px;
      line-height: 1.8;
      padding-left: 25px;
      position: relative;
      margin-bottom: 10px;
    }

    .info-section li:before {
      content: "•";
      color: #1d3759;
      font-weight: bold;
      font-size: 20px;
      position: absolute;
      left: 0;
    }

    .test-cta {
      margin-top: 30px;
      padding-top: 30px;
      border-top: 2px solid #f0f0f0;
    }

    .test-cta h3 {
      color: #1d3759;
      font-size: 20px;
      margin-bottom: 15px;
      font-weight: 700;
    }

    .btn-test {
      display: inline-block;
      background: linear-gradient(135deg, #1d3759 0%, #4a90e2 100%);
      color: white;
      padding: 16px 32px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(29,55,89,0.3);
    }

    .btn-test:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(29,55,89,0.4);
    }

    /* Result modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 50px;
      max-width: 600px;
      width: 100%;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-content h2 {
      color: #1d3759;
      font-size: 32px;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .formation-badge {
      display: inline-block;
      padding: 12px 24px;
      border-radius: 30px;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 25px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .badge-bronze {
      background: linear-gradient(135deg, #CD7F32 0%, #E8A87C 100%);
      color: white;
    }

    .badge-silver {
      background: linear-gradient(135deg, #C0C0C0 0%, #E8E8E8 100%);
      color: #333;
    }

    .badge-gold {
      background: linear-gradient(135deg, #FFD700 0%, #FFF4A3 100%);
      color: #333;
    }

    .modal-content p {
      color: #666;
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 30px;
    }

    .btn-formation {
      display: inline-block;
      background: #1d3759;
      color: white;
      padding: 16px 40px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      font-size: 18px;
      transition: all 0.2s ease;
      margin-right: 15px;
      box-shadow: 0 4px 12px rgba(29,55,89,0.3);
    }

    .btn-formation:hover {
      background: #2d4a6f;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(29,55,89,0.4);
    }

    .btn-close {
      display: inline-block;
      background: #f0f0f0;
      color: #666;
      padding: 16px 40px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
    }

    .btn-close:hover {
      background: #e0e0e0;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .container {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .quadran-section,
      .info-section {
        padding: 25px;
      }

      .quadran-header h1 {
        font-size: 24px;
      }

      .modal-content {
        padding: 30px 25px;
      }

      .modal-content h2 {
        font-size: 24px;
      }

      .btn-formation,
      .btn-close {
        display: block;
        margin: 10px 0;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    
    <!-- Left: Quadran -->
    <div class="quadran-section">
      <div class="quadran-header">
        <h1>Où pointe votre boussole Data ?</h1>
        <p>Placez-vous sur les deux axes selon vos compétences et aspirations.</p>
      </div>

      <div class="quadran-wrapper">
        <canvas id="quadranCanvas"></canvas>
      </div>

      <div class="controls">
        <button class="btn btn-reset" onclick="resetCursor()">Réinitialiser</button>
        <button class="btn btn-validate" onclick="validatePosition()">Valider</button>
        <div class="coordinates" id="coordinates">X: 50% • Y: 50%</div>
      </div>
    </div>

    <!-- Right: Info -->
    <div class="info-section">
      <h2>Pourquoi viser la double compétence Data & Business ?</h2>
      
      <p>La double casquette vous rend <strong>indispensable</strong> : vous reliez vision et chiffres, décidez avec des preuves et automatisez le répétitif.</p>
      
      <p>Résultat : plus d'impact, des arbitrages clairs et un <strong>ROI visible</strong>, que vous visiez le management ou le freelance premium.</p>

      <ul>
        <li><strong>Décisions chiffrées</strong> qui alignent stratégie et exécution.</li>
        <li><strong>Automatisation</strong> → moins d'opérationnel, plus de valeur.</li>
        <li><strong>Crédibilité</strong> auprès de la direction ou des clients.</li>
      </ul>

      <div class="test-cta">
        <h3>Vous êtes perdus ?</h3>
        <p>Faites notre <strong>test (10 questions)</strong> pour une <strong>recommandation plus précise</strong>.</p>
        <a href="https://christopherklein-cmyk.github.io/cklabs_exercices/quiz.html" 
           class="btn-test" 
           target="_blank"
           rel="noopener">
          Passer le test 10 questions
        </a>
      </div>
    </div>

  </div>

  <!-- Result Modal -->
  <div class="modal" id="resultModal">
    <div class="modal-content">
      <h2>Votre formation idéale</h2>
      <div id="modalBadge"></div>
      <p id="modalDescription"></p>
      <a href="#" id="modalLink" class="btn-formation" target="_blank" rel="noopener">Découvrir la formation</a>
      <button class="btn-close" onclick="closeModal()">Fermer</button>
    </div>
  </div>

  <script>
    // ============================================
    // CONFIGURATION - Facile à modifier
    // ============================================
    const FORMATIONS = {
      bronze: {
        name: "Kickstart",
        badge: "Bronze",
        description: "Parfait pour démarrer ! Apprenez à automatiser vos reportings Excel et créer vos premiers dashboards. Aucune expérience data nécessaire.",
        url: "https://cklabs.learnworlds.com/course/lookerstudio",
        color: "#CD7F32"
      },
      silver: {
        name: "360",
        badge: "Silver",
        description: "Vous avez des bases solides. Cette formation intermédiaire vous apprend SQL et analyse avancée pour devenir vraiment autonome.",
        url: "https://cklabs.learnworlds.com", // À modifier
        color: "#C0C0C0"
      },
      gold: {
        name: "Advanced",
        badge: "Gold",
        description: "Vous maîtrisez déjà les outils. Passez au niveau supérieur avec analyses à fort impact business et pensée data-driven avancée.",
        url: "https://cklabs.learnworlds.com", // À modifier
        color: "#FFD700"
      }
    };

    const COLORS = {
      ck_blue: '#1d3759',
      bronze: '#CD7F32',
      silver: '#C0C0C0',
      gold: '#FFD700'
    };

    // ============================================
    // CANVAS SETUP
    // ============================================
    const canvas = document.getElementById('quadranCanvas');
    const ctx = canvas.getContext('2d');
    
    let cursorPos = { x: 0.5, y: 0.5 }; // Position relative (0-1)
    let isDragging = false;

    function setupCanvas() {
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * window.devicePixelRatio;
      canvas.height = rect.height * window.devicePixelRatio;
      ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
      drawQuadran();
    }

    // ============================================
    // GRADIENT CALCULATION
    // ============================================
    function getGradientColor(x, y) {
      // x: 0 (left/débutant) → 1 (right/expert)
      // y: 0 (bottom/indépendant) → 1 (top/corporate)
      
      // Determine dominant formation based on position
      let targetColor;
      
      if (x < 0.4) {
        // Débutant zone → Bronze
        targetColor = COLORS.bronze;
      } else if (x < 0.7) {
        // Intermédiaire zone → Blue (instead of silver)
        targetColor = '#4a90e2'; // Lighter CK blue
      } else {
        // Expert zone → Gold
        targetColor = COLORS.gold;
      }

      // Mix with CK blue based on Y position
      const ckBlue = hexToRgb(COLORS.ck_blue);
      const target = hexToRgb(targetColor);
      
      // More blue at top (corporate), more target color at bottom
      const blueRatio = y * 0.5; // Max 50% blue for better blend
      
      const r = Math.round(ckBlue.r * blueRatio + target.r * (1 - blueRatio));
      const g = Math.round(ckBlue.g * blueRatio + target.g * (1 - blueRatio));
      const b = Math.round(ckBlue.b * blueRatio + target.b * (1 - blueRatio));
      
      return `rgb(${r}, ${g}, ${b})`;
    }

    function hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : null;
    }

    // ============================================
    // DRAWING
    // ============================================
    function drawQuadran() {
      const w = canvas.getBoundingClientRect().width;
      const h = canvas.getBoundingClientRect().height;
      
      ctx.clearRect(0, 0, w, h);

      // Background gradient based on cursor position
      const gradient = ctx.createRadialGradient(
        cursorPos.x * w, cursorPos.y * h, 0,
        cursorPos.x * w, cursorPos.y * h, w * 0.8
      );
      
      const centerColor = getGradientColor(cursorPos.x, cursorPos.y);
      gradient.addColorStop(0, centerColor);
      gradient.addColorStop(1, '#f5f7fa');
      
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, w, h);

      // Draw CK logo in background
      drawCKLogo(w, h);

      // Draw axes
      drawAxes(w, h);

      // Draw labels
      drawLabels(w, h);

      // Draw cursor
      drawCursor(w, h);
    }

    function drawCKLogo(w, h) {
      ctx.save();
      ctx.globalAlpha = 0.05;
      ctx.font = `bold ${w * 0.4}px Arial`;
      ctx.fillStyle = COLORS.ck_blue;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('CK', w / 2, h / 2);
      ctx.restore();
    }

    function drawAxes(w, h) {
      ctx.strokeStyle = '#d0d0d0';
      ctx.lineWidth = 2;
      
      // Vertical axis
      ctx.beginPath();
      ctx.moveTo(w / 2, 0);
      ctx.lineTo(w / 2, h);
      ctx.stroke();
      
      // Horizontal axis
      ctx.beginPath();
      ctx.moveTo(0, h / 2);
      ctx.lineTo(w, h / 2);
      ctx.stroke();
    }

    function drawLabels(w, h) {
      ctx.fillStyle = COLORS.ck_blue;
      ctx.font = 'bold 14px sans-serif';
      ctx.textAlign = 'center';
      
      // Top: Évoluer en entreprise
      ctx.fillText('Évoluer en entreprise', w / 2, 20);
      
      // Bottom: Devenir indépendant
      ctx.fillText('Devenir indépendant', w / 2, h - 10);
      
      // Left: Débutant
      ctx.save();
      ctx.translate(15, h / 2);
      ctx.rotate(-Math.PI / 2);
      ctx.textAlign = 'center';
      ctx.fillText('Débutant', 0, 0);
      ctx.restore();
      
      // Right: Expert
      ctx.save();
      ctx.translate(w - 15, h / 2);
      ctx.rotate(Math.PI / 2);
      ctx.textAlign = 'center';
      ctx.fillText('Expert', 0, 0);
      ctx.restore();

      // Center label
      ctx.font = '12px sans-serif';
      ctx.fillStyle = '#999';
      ctx.fillText('Skills data / analytics', w / 2, h / 2 - 10);
    }

    function drawCursor(w, h) {
      const x = cursorPos.x * w;
      const y = cursorPos.y * h;
      
      // Outer circle
      ctx.beginPath();
      ctx.arc(x, y, 12, 0, Math.PI * 2);
      ctx.fillStyle = COLORS.ck_blue;
      ctx.fill();
      
      // Inner circle
      ctx.beginPath();
      ctx.arc(x, y, 8, 0, Math.PI * 2);
      ctx.fillStyle = 'white';
      ctx.fill();
      
      // Center dot
      ctx.beginPath();
      ctx.arc(x, y, 3, 0, Math.PI * 2);
      ctx.fillStyle = COLORS.ck_blue;
      ctx.fill();
    }

    // ============================================
    // INTERACTIONS
    // ============================================
    canvas.addEventListener('mousedown', startDrag);
    canvas.addEventListener('mousemove', drag);
    canvas.addEventListener('mouseup', endDrag);
    canvas.addEventListener('mouseleave', endDrag);
    
    canvas.addEventListener('touchstart', startDrag);
    canvas.addEventListener('touchmove', drag);
    canvas.addEventListener('touchend', endDrag);

    function startDrag(e) {
      isDragging = true;
      updateCursorPosition(e);
    }

    function drag(e) {
      if (!isDragging) return;
      updateCursorPosition(e);
    }

    function endDrag() {
      isDragging = false;
    }

    function updateCursorPosition(e) {
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      const clientY = e.touches ? e.touches[0].clientY : e.clientY;
      
      cursorPos.x = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
      cursorPos.y = Math.max(0, Math.min(1, (clientY - rect.top) / rect.height));
      
      drawQuadran();
      updateCoordinates();
    }

    function updateCoordinates() {
      const xPercent = Math.round(cursorPos.x * 100);
      const yPercent = Math.round((1 - cursorPos.y) * 100); // Invert Y for display
      document.getElementById('coordinates').textContent = `X: ${xPercent}% • Y: ${yPercent}%`;
    }

    function resetCursor() {
      cursorPos = { x: 0.5, y: 0.5 };
      drawQuadran();
      updateCoordinates();
    }

    // ============================================
    // VALIDATION & RECOMMENDATION
    // ============================================
    function validatePosition() {
      const x = cursorPos.x;
      const y = cursorPos.y;
      
      let formation;
      
      if (x < 0.4) {
        formation = FORMATIONS.bronze;
      } else if (x < 0.7) {
        formation = FORMATIONS.silver;
      } else {
        formation = FORMATIONS.gold;
      }
      
      showResult(formation);
    }

    function showResult(formation) {
      const modal = document.getElementById('resultModal');
      const badge = document.getElementById('modalBadge');
      const description = document.getElementById('modalDescription');
      const link = document.getElementById('modalLink');
      
      badge.innerHTML = `<div class="formation-badge badge-${formation.badge.toLowerCase()}">${formation.badge} - ${formation.name}</div>`;
      description.textContent = formation.description;
      link.href = formation.url;
      
      modal.classList.add('active');
    }

    function closeModal() {
      document.getElementById('resultModal').classList.remove('active');
    }

    // Close modal on background click
    document.getElementById('resultModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });

    // ============================================
    // INIT
    // ============================================
    window.addEventListener('load', () => {
      setupCanvas();
      updateCoordinates();
    });

    window.addEventListener('resize', () => {
      setupCanvas();
    });
  </script>

</body>
</html>
